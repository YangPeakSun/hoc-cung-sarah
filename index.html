<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H·ªçc C√πng C√¥ Sarah</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- API Key Input -->
    <div id="api-key-setup" class="popup-overlay hidden">
        <div class="popup">
            <h2>Thi·∫øt l·∫≠p API Key Gemini</h2>
            <p>ƒê·ªÉ s·ª≠ d·ª•ng ch·ª©c nƒÉng t·∫°o ƒë·ªÅ t·ª± ƒë·ªông, vui l√≤ng nh·∫≠p API Key c·ªßa b·∫°n.
               <br><strong>C·∫¢NH B√ÅO:</strong> Kh√¥ng chia s·∫ª API Key n√†y. Key ch·ªâ d√πng cho m·ª•c ƒë√≠ch c√° nh√¢n khi ch·∫°y tr√™n m√°y c·ªßa b·∫°n.
            </p>
            <input type="password" id="gemini-api-key-input" placeholder="Nh·∫≠p Gemini API Key t·∫°i ƒë√¢y">
            <button id="save-api-key-btn">L∆∞u v√† Ti·∫øp t·ª•c</button>
            <button id="skip-api-key-btn">B·ªè qua (D√πng c√¢u h·ªèi m·∫´u)</button>
             <p style="font-size: 0.8em; margin-top: 10px;">API Key s·∫Ω ƒë∆∞·ª£c l∆∞u tr·ªØ trong tr√¨nh duy·ªát cho c√°c l·∫ßn ch∆°i sau tr√™n m√°y n√†y.</p>
        </div>
    </div>

    <!-- ONBOARDING POPUPS -->
    <div id="onboarding-overlay" class="popup-overlay hidden">
        <div id="welcome-popup" class="popup active">
            <h2>üéâ H·ªçc C√πng C√¥ Sarah üéâ</h2>
            <p>Ch√†o m·ª´ng ƒë·∫øn v·ªõi l·ªõp h·ªçc vui nh·ªôn!</p>
            <button id="start-onboarding-btn">B·∫Øt ƒë·∫ßu n√†o!</button>
        </div>

        <div id="name-popup" class="popup hidden">
            <h3>Ch√†o b·∫°n nh·ªè, em t√™n g√¨?</h3>
            <input type="text" id="student-name-input" placeholder="Nh·∫≠p t√™n c·ªßa em">
            <button id="submit-name-btn">Ti·∫øp theo</button>
        </div>

        <div id="chien-tuong-popup" class="popup hidden"> <!-- MODIFIED: Was avatar-popup -->
            <h3>H√£y ch·ªçn Chi·∫øn t∆∞·ªõng</h3>
            <p style="font-size: 0.9em; margin-bottom: 15px;">M·ªói Chi·∫øn t∆∞·ªõng mang m·ªôt s·ª©c m·∫°nh nguy√™n t·ªë ƒë·∫∑c bi·ªát!</p>
            <div class="chien-tuong-selection"> <!-- MODIFIED: Was avatar-selection -->
                <div class="chien-tuong-card" data-avatar="Images/avatar1.png" data-element="moc" data-element-name="M·ªôc">
                    <img src="Images/avatar1.png" alt="Chi·∫øn t∆∞·ªõng M·ªôc">
                    <div class="element-name">M·ªôc Tinh</div>
                    <div class="element-effect moc-effect">
                        <div class="leaf"></div><div class="leaf"></div><div class="leaf"></div>
                    </div>
                </div>
                <div class="chien-tuong-card" data-avatar="Images/avatar2.png" data-element="kim" data-element-name="Kim">
                    <img src="Images/avatar2.png" alt="Chi·∫øn t∆∞·ªõng Kim">
                    <div class="element-name">Kim S∆∞</div>
                    <div class="element-effect kim-effect">
                        <div class="spark"></div><div class="spark"></div><div class="spark"></div>
                    </div>
                </div>
                <div class="chien-tuong-card" data-avatar="Images/avatar3.png" data-element="thuy" data-element-name="Th·ªßy">
                    <img src="Images/avatar3.png" alt="Chi·∫øn t∆∞·ªõng Th·ªßy">
                    <div class="element-name">Th·ªßy Long</div>
                    <div class="element-effect thuy-effect">
                        <div class="drop"></div><div class="drop"></div><div class="drop"></div>
                    </div>
                </div>
                <div class="chien-tuong-card" data-avatar="Images/avatar4.png" data-element="hoa" data-element-name="H·ªèa">
                    <img src="Images/avatar4.png" alt="Chi·∫øn t∆∞·ªõng H·ªèa">
                    <div class="element-name">H·ªèa Ph·ª•ng</div>
                    <div class="element-effect hoa-effect">
                        <div class="flame"></div><div class="flame"></div><div class="flame"></div>
                    </div>
                </div>
                <div class="chien-tuong-card" data-avatar="Images/avatar5.png" data-element="tho" data-element-name="Th·ªï">
                    <img src="Images/avatar5.png" alt="Chi·∫øn t∆∞·ªõng Th·ªï">
                    <div class="element-name">Th·ªï ƒê·ªãa</div>
                    <div class="element-effect tho-effect">
                        <div class="rock"></div><div class="rock"></div><div class="rock"></div>
                    </div>
                </div>
            </div>
            <button id="confirm-chien-tuong-btn" class="hidden">Ch·ªçn Chi·∫øn t∆∞·ªõng n√†y</button>
        </div>


        <div id="age-popup" class="popup hidden">
            <h3>H√£y cho c√¥ Sarah bi·∫øt, em m·∫•y tu·ªïi r·ªìi?</h3>
            <select id="student-age-select">
                <option value="6">6 tu·ªïi (L·ªõp 1)</option>
                <option value="7">7 tu·ªïi (L·ªõp 2)</option>
                <option value="8">8 tu·ªïi (L·ªõp 3)</option>
                <option value="9">9 tu·ªïi (L·ªõp 4)</option>
                <option value="10">10 tu·ªïi (L·ªõp 5)</option>
                <option value="11">11 tu·ªïi (L·ªõp 6)</option>
                <option value="12">12 tu·ªïi (L·ªõp 7)</option>
                <option value="13">13 tu·ªïi (L·ªõp 8)</option>
                <option value="14">14 tu·ªïi (L·ªõp 9)</option>
            </select>
            <button id="submit-age-btn">Ho√†n t·∫•t</button>
        </div>
    </div>

    <!-- MAIN APPLICATION AREA -->
    <div id="app-container" class="hidden">
        <header>
            <div class="user-info">
                <img id="user-avatar-display" src="Images/avatar1.png" alt="User Avatar">
                <div>
                    <span id="user-name-display">T√™n H·ªçc Sinh</span><br>
                    <span id="user-title-display" class="title-badge">Ch∆∞a c√≥ danh hi·ªáu</span><br>
                    <span class="points-info">T·ªïng ƒëi·ªÉm: <span id="user-points-display">0</span> üåü</span>
                </div>
            </div>
            <div class="header-actions">
                <button id="config-api-key-btn" class="small-btn" title="C·∫•u h√¨nh API Key Gemini">üîë API</button>
                <button id="logout-btn" class="small-btn">ƒêƒÉng xu·∫•t</button>
            </div>
        </header>

        <nav id="main-nav">
            <button data-screen="dashboard" class="nav-btn active">Trang Ch·ªß</button>
            <button data-screen="learning" class="nav-btn">H·ªçc C√πng Sarah</button>
            <button data-screen="store" class="nav-btn">C·ª≠a H√†ng</button>
            <button data-screen="achievements" class="nav-btn">Th√†nh T√≠ch</button>
            <button data-screen="collections" class="nav-btn">B·ªô S∆∞u T·∫≠p</button>
            <button data-screen="settings" class="nav-btn">C√†i ƒê·∫∑t</button>
        </nav>

        <main>
            <!-- DASHBOARD SCREEN -->
            <section id="dashboard-screen" class="screen active">
                <h2>Nhi·ªám V·ª• H√†ng Ng√†y</h2>
                <div class="progress-bar-container">
                    <div id="daily-task-progress" class="progress-bar"></div>
                </div>
                <p id="daily-task-status">Ho√†n th√†nh: 0/5</p>

                <div id="sarah-chat-bubble" class="chat-bubble">
                    <img src="Images/co_sarah.png" alt="C√¥ Sarah" class="sarah-chat-avatar">
                    <div class="sarah-chat-content">
                        <strong>C√¥ Sarah:</strong> <span id="sarah-chat-message">Ch√†o <span id="sarah-chat-name">em</span>, h√¥m nay m√¨nh c√πng c·ªë g·∫Øng nh√©!</span>
                    </div>
                </div>

                <div id="daily-tasks-list" class="tasks-grid">
                    <!-- Tasks will be injected by JS -->
                </div>
            </section>

            <!-- LEARNING SCREEN -->
            <section id="learning-screen" class="screen hidden">
                <h2>H·ªçc C√πng Sarah</h2>
                <p id="quiz-sets-today-p">S·ªë b·ªô ƒë·ªÅ ƒë√£ l√†m h√¥m nay: <span id="quiz-sets-today">0</span>/20</p>
                <p id="gemini-status" style="font-style: italic;">Ch∆∞a c·∫•u h√¨nh API Key Gemini. S·ª≠ d·ª•ng c√¢u h·ªèi m·∫´u.</p>
                <button id="start-quiz-btn">B·∫Øt ƒë·∫ßu L√†m B√†i</button>
                <div id="quiz-loading-indicator" class="hidden">ƒêang t·∫£i b·ªô ƒë·ªÅ t·ª´ Gemini, vui l√≤ng ch·ªù... üß†</div>
                <div id="quiz-area" class="hidden">
                    <div id="quiz-timer-container" class="timer-container hidden">Th·ªùi gian c√≤n l·∫°i: <span id="quiz-time-left">60</span> gi√¢y</div>
                    <div id="question-container">
                        <p id="question-text"></p>
                        <p id="question-translation" class="translation"></p>
                    </div>
                    <div id="options-container" class="options-grid">
                        <!-- Options will be injected by JS -->
                    </div>
                    <p id="quiz-feedback"></p>
                    <button id="next-question-btn" class="hidden">C√¢u Ti·∫øp Theo</button>
                </div>
                 <div id="mini-game-area" class="hidden">
                    <h3>üéâ Ph·∫ßn th∆∞·ªüng ƒë·∫∑c bi·ªát! üéâ</h3>
                    <p>Tr·∫£ l·ªùi ƒë√∫ng c√¢u h·ªèi sau ƒë·ªÉ nh·∫≠n m·∫£nh gh√©p th√∫ c∆∞ng hi·∫øm!</p>
                    <div id="mini-game-timer-container" class="timer-container hidden">Th·ªùi gian c√≤n l·∫°i: <span id="mini-game-time-left">30</span> gi√¢y</div>
                    <div id="mini-game-question-container">
                         <p id="mini-game-question-text"></p>
                    </div>
                    <div id="mini-game-options-container" class="options-grid">
                        <!-- Mini-game options will be injected by JS -->
                    </div>
                    <p id="mini-game-feedback"></p>
                </div>
            </section>

            <!-- STORE SCREEN -->
            <section id="store-screen" class="screen hidden">
                <h2>Vui Ch∆°i & C·ª≠a H√†ng</h2>
                <div class="tabs">
                    <button class="tab-button active" data-tab="pets-store">Th√∫ C∆∞ng</button>
                    <button class="tab-button" data-tab="accessories-store">Ph·ª• Ki·ªán</button>
                    <button class="tab-button" data-tab="skills-store">K·ªπ NƒÉng</button>
                    <button class="tab-button" data-tab="care-items-store">ChƒÉm S√≥c</button>
                </div>
                <div id="pets-store" class="tab-content active store-grid">
                    <!-- Pet items will be injected by JS -->
                </div>
                <div id="accessories-store" class="tab-content store-grid">
                    <!-- Accessory items will be injected by JS -->
                </div>
                <div id="skills-store" class="tab-content store-grid">
                    <!-- Skill items will be injected by JS -->
                </div>
                <div id="care-items-store" class="tab-content store-grid">
                    <!-- Care items will be injected by JS -->
                </div>
                <div id="lucky-spin-container" style="margin-top: 20px; text-align: center;">
                    <p>B·∫°n c√≥ <span id="spin-count">0</span> l∆∞·ª£t quay V√≤ng Quay May M·∫Øn.</p>
                    <button id="spin-wheel-btn" disabled>Quay!</button>
                    <p id="spin-result"></p>
                </div>
            </section>

            <!-- ACHIEVEMENTS SCREEN -->
            <section id="achievements-screen" class="screen hidden">
                <div id="chien-tuong-display" class="chien-tuong-container">
                    <h3>Chi·∫øn T∆∞·ªõng C·ªßa Em</h3>
                    <div class="chien-tuong-avatar-stars">
                        <img id="chien-tuong-avatar" src="Images/avatar1.png" alt="Chi·∫øn T∆∞·ªõng Avatar">
                        <div id="chien-tuong-stars-container" class="stars-display">
                            <!-- Stars will be injected by JS: e.g. <span class="star">‚òÖ</span> -->
                        </div>
                    </div>
                    <p id="chien-tuong-level-name">Ch∆∞a c√≥</p> <!-- Text will be set by JS -->
                    <p id="chien-tuong-chien-luc-display" class="chien-luc-text">Chi·∫øn l·ª±c: <span id="chien-luc-value">0</span></p>
                </div>
                <div id="chien-tuong-upgrade-effect-container"></div>

                <h3>Th·ªëng k√™</h3>
                <div id="stats-container">
                    <p>B·ªô ƒë·ªÅ ƒë√£ l√†m h√¥m nay: <span id="stats-quiz-sets-today">0</span></p>
                    <p>Nhi·ªám v·ª• ho√†n th√†nh h√¥m nay: <span id="stats-daily-tasks-completed">0</span></p>
                    <p>S·ªë th√∫ c∆∞ng ƒëang s·ªü h·ªØu: <span id="stats-pets-owned-count">0</span></p>
                    <p>S·ªë danh hi·ªáu ƒë√£ m·ªü kh√≥a: <span id="stats-titles-unlocked-count">0</span></p>
                </div>

                <h3>Th·ª≠ th√°ch & B·∫£ng X·∫øp H·∫°ng</h3>
                <div id="challenges-container">
                    <p><em>Ph·∫ßn th·ª≠ th√°ch s·∫Ω s·ªõm ƒë∆∞·ª£c c·∫≠p nh·∫≠t!</em></p>
                </div>
                <h4>B·∫£ng X·∫øp H·∫°ng Chi·∫øn L·ª±c (Top 10 To√†n Server*)</h4>
                <p class="leaderboard-disclaimer">(*Ch·ªâ t√≠nh ng∆∞·ªùi ch∆°i tr√™n tr√¨nh duy·ªát n√†y)</p>
                <ol id="leaderboard-list">
                    <!-- Leaderboard items will be injected by JS -->
                </ol>
                <p id="current-user-rank-info"></p>

            </section>

            <!-- COLLECTIONS SCREEN -->
            <section id="collections-screen" class="screen hidden">
                <h2>B·ªô S∆∞u T·∫≠p</h2>

                <h3>Th√∫ C∆∞ng ƒê√£ S·ªü H·ªØu</h3>
                <div id="owned-pets-collection" class="collection-grid pets-collection-grid">
                    <!-- Pets will be injected by JS -->
                </div>

                <h3>Ph·ª• Ki·ªán ƒê√£ C√≥</h3>
                <div id="owned-accessories-collection" class="collection-grid">
                    <!-- Accessories will be injected by JS, example:
                    <div class="collection-item accessory-collection-item">
                        <div class="item-icon emoji-icon">üëí</div>
                        <h4>M≈© Th·ªùi Trang</h4>
                        <button class="equip-accessory-btn small-btn" data-item-id="hat_accessory">G·∫Øn cho Pet</button>
                    </div>
                     -->
                </div>

                <h3>K·ªπ NƒÉng ƒê√£ H·ªçc</h3>
                <div id="owned-skills-collection" class="collection-grid">
                    <!-- Skills will be injected by JS, example:
                    <div class="collection-item skill-collection-item">
                        <div class="item-icon emoji-icon">üå™Ô∏è</div>
                        <h4>L·ªëc Xo√°y</h4>
                        <button class="equip-skill-btn small-btn" data-item-id="tornado_skill">G·∫Øn cho Pet</button>
                    </div>
                    -->
                </div>

                <h3>Danh Hi·ªáu ƒê√£ M·ªü Kh√≥a</h3>
                <div id="unlocked-titles-collection" class="collection-grid titles-collection">
                    <!-- Titles will be injected by JS -->
                </div>
            </section>

            <!-- SETTINGS SCREEN -->
            <section id="settings-screen" class="screen hidden">
                <h2>C√†i ƒê·∫∑t</h2>
                <div>
                    <label for="font-select">Ch·ªçn Font ch·ªØ:</label>
                    <select id="font-select">
                        <option value="'Montserrat', sans-serif">Montserrat (M·∫∑c ƒë·ªãnh)</option>
                        <option value="Arial, sans-serif">Arial</option>
                        <option value="'Times New Roman', Times, serif">Times New Roman</option>
                    </select>
                </div>
                <div>
                    <label for="theme-select">Ch·ªçn M√†u n·ªÅn (Pastel):</label>
                    <select id="theme-select">
                        <option value="default">M·∫∑c ƒë·ªãnh (H·ªìng nh·∫°t)</option>
                        <option value="blue">Xanh d∆∞∆°ng nh·∫°t</option>
                        <option value="green">Xanh l√° nh·∫°t</option>
                        <option value="yellow">V√†ng nh·∫°t</option>
                    </select>
                </div>
                <div id="reward-code-section">
                    <label for="reward-code-input">Nh·∫≠p M√£ Khen Th∆∞·ªüng:</label>
                    <input type="text" id="reward-code-input" placeholder="V√≠ d·ª•: emyeubame">
                    <button id="submit-reward-code-btn">Nh·∫≠n Th∆∞·ªüng</button>
                </div>
                 <button id="reset-data-btn" class="warning-btn">X√≥a to√†n b·ªô d·ªØ li·ªáu (L√†m l·∫°i t·ª´ ƒë·∫ßu)</button>
            </section>
        </main>
    </div>

    <!-- GENERAL POPUP FOR NOTIFICATIONS/CONFIRMATIONS -->
    <div id="general-popup-overlay" class="popup-overlay hidden">
        <div id="general-popup" class="popup">
            <h3 id="general-popup-title">Th√¥ng b√°o</h3>
            <div id="general-popup-message-container"> <!-- Container ƒë·ªÉ ch·ª©a n·ªôi dung ƒë·ªông -->
                 <p id="general-popup-message">N·ªôi dung th√¥ng b√°o.</p>
            </div>
            <div id="general-popup-actions">
                <button id="general-popup-confirm-btn">ƒê·ªìng √Ω</button>
                <button id="general-popup-cancel-btn" class="hidden">H·ªßy</button>
            </div>
        </div>
    </div>

    <script src="main.js"></script>
</body>
</html>